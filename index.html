<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Саморазвитие</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --bg-dark: #1a1a1a;
            --bg-light: #2c2c2c;
            --text-light: #ecf0f1;
            --border-color: #34495e;
        }

        body {
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--primary-color) 100%);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
        }

        .navbar {
            background: rgba(44, 62, 80, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--secondary-color);
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--secondary-color) !important;
        }

        .stats-card {
            background: linear-gradient(145deg, var(--bg-light), var(--primary-color));
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .game-card {
            background: linear-gradient(145deg, var(--bg-light), var(--primary-color));
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .btn-game {
            background: linear-gradient(45deg, var(--secondary-color), var(--success-color));
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-game:hover {
            background: linear-gradient(45deg, var(--success-color), var(--secondary-color));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            color: white;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--secondary-color), var(--success-color));
            height: 20px;
            border-radius: 10px;
        }

        .game-area {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .game-button {
            background: linear-gradient(45deg, var(--accent-color), var(--warning-color));
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .game-button:active {
            transform: translateY(0);
        }

        .timer {
            font-size: 2rem;
            font-weight: bold;
            color: var(--warning-color);
            margin: 1rem 0;
        }

        .score {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success-color);
            margin: 1rem 0;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }

        .memory-card {
            width: 60px;
            height: 60px;
            background: var(--secondary-color);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: var(--success-color);
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: var(--warning-color);
            cursor: default;
        }

        .attention-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            max-width: 250px;
            margin: 20px auto;
        }

        .attention-cell {
            width: 40px;
            height: 40px;
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .attention-cell:hover {
            background: var(--secondary-color);
        }

        .attention-cell.target {
            background: var(--accent-color);
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .logic-sequence {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .logic-number {
            width: 50px;
            height: 50px;
            background: var(--secondary-color);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .logic-input {
            width: 80px;
            height: 50px;
            background: var(--bg-light);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-light);
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0 10px;
        }

        @media (max-width: 768px) {
            .stats-card {
                margin-bottom: 1rem;
            }
            
            .stat-icon {
                font-size: 2rem;
            }
            
            .stat-value {
                font-size: 1.8rem;
            }
            
            .game-card {
                padding: 1.5rem;
            }
            
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
                max-width: 200px;
            }
            
            .memory-card {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="fas fa-dragon"></i> RPG Саморазвитие</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#stats">Статистики</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#games">Игры</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 80px;">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-5">
                    <i class="fas fa-crown text-warning"></i>
                    Развивайте свои навыки в RPG стиле
                </h1>
            </div>
        </div>

        <!-- Статистики -->
        <div id="stats" class="row mb-5">
            <div class="col-12">
                <h2 class="text-center mb-4">Ваши характеристики</h2>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stats-card text-center">
                    <i class="fas fa-eye stat-icon text-primary"></i>
                    <div class="stat-value" id="attention-stat">50</div>
                    <div class="stat-label">Внимательность</div>
                    <div class="progress mt-2">
                        <div class="progress-bar" id="attention-progress" style="width: 50%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stats-card text-center">
                    <i class="fas fa-brain stat-icon text-success"></i>
                    <div class="stat-value" id="memory-stat">50</div>
                    <div class="stat-label">Память</div>
                    <div class="progress mt-2">
                        <div class="progress-bar" id="memory-progress" style="width: 50%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stats-card text-center">
                    <i class="fas fa-bolt stat-icon text-warning"></i>
                    <div class="stat-value" id="reaction-stat">50</div>
                    <div class="stat-label">Реакция</div>
                    <div class="progress mt-2">
                        <div class="progress-bar" id="reaction-progress" style="width: 50%"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stats-card text-center">
                    <i class="fas fa-puzzle-piece stat-icon text-danger"></i>
                    <div class="stat-value" id="logic-stat">50</div>
                    <div class="stat-label">Логика</div>
                    <div class="progress mt-2">
                        <div class="progress-bar" id="logic-progress" style="width: 50%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Игры -->
        <div id="games" class="row">
            <div class="col-12">
                <h2 class="text-center mb-4">Тренировочные квесты</h2>
            </div>

            <!-- Игра на внимательность -->
            <div class="col-lg-6 col-md-12">
                <div class="game-card">
                    <h3><i class="fas fa-eye text-primary"></i> Поиск цели</h3>
                    <p>Найдите и кликните на выделенные ячейки как можно быстрее!</p>
                    <button class="btn btn-game" onclick="startAttentionGame()">Начать тренировку</button>
                    
                    <div id="attention-game" class="game-area" style="display: none;">
                        <div class="timer" id="attention-timer">30</div>
                        <div class="score" id="attention-score">Очки: 0</div>
                        <div class="attention-grid" id="attention-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Игра на память -->
            <div class="col-lg-6 col-md-12">
                <div class="game-card">
                    <h3><i class="fas fa-brain text-success"></i> Запомни последовательность</h3>
                    <p>Запомните последовательность карточек и повторите её!</p>
                    <button class="btn btn-game" onclick="startMemoryGame()">Начать тренировку</button>
                    
                    <div id="memory-game" class="game-area" style="display: none;">
                        <div class="score" id="memory-score">Уровень: 1</div>
                        <div id="memory-status">Смотрите и запоминайте!</div>
                        <div class="memory-grid" id="memory-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Игра на реакцию -->
            <div class="col-lg-6 col-md-12">
                <div class="game-card">
                    <h3><i class="fas fa-bolt text-warning"></i> Скорость реакции</h3>
                    <p>Кликните на кнопку как можно быстрее после её появления!</p>
                    <button class="btn btn-game" onclick="startReactionGame()">Начать тренировку</button>
                    
                    <div id="reaction-game" class="game-area" style="display: none;">
                        <div class="score" id="reaction-score">Попытка: 1/5</div>
                        <div id="reaction-status">Приготовьтесь...</div>
                        <button class="game-button" id="reaction-button" style="display: none;" onclick="reactionClick()">КЛИК!</button>
                    </div>
                </div>
            </div>

            <!-- Игра на логику -->
            <div class="col-lg-6 col-md-12">
                <div class="game-card">
                    <h3><i class="fas fa-puzzle-piece text-danger"></i> Числовая последовательность</h3>
                    <p>Найдите закономерность и продолжите последовательность!</p>
                    <button class="btn btn-game" onclick="startLogicGame()">Начать тренировку</button>
                    
                    <div id="logic-game" class="game-area" style="display: none;">
                        <div class="score" id="logic-score">Задача: 1/5</div>
                        <div class="logic-sequence" id="logic-sequence"></div>
                        <div>
                            <input type="number" class="logic-input" id="logic-input" placeholder="?">
                            <button class="game-button" onclick="checkLogicAnswer()">Проверить</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Система сохранения прогресса
        class GameProgress {
            constructor() {
                this.stats = this.loadStats();
                this.updateDisplay();
            }

            loadStats() {
                const saved = localStorage.getItem('rpg-stats');
                return saved ? JSON.parse(saved) : {
                    attention: { value: 50, scores: [] },
                    memory: { value: 50, scores: [] },
                    reaction: { value: 50, scores: [] },
                    logic: { value: 50, scores: [] }
                };
            }

            saveStats() {
                localStorage.setItem('rpg-stats', JSON.stringify(this.stats));
            }

            updateStat(statName, score) {
                const stat = this.stats[statName];
                stat.scores.push(score);
                
                // Оставляем только последние 20 результатов
                if (stat.scores.length > 20) {
                    stat.scores = stat.scores.slice(-20);
                }
                
                // Вычисляем среднее
                const average = stat.scores.reduce((a, b) => a + b, 0) / stat.scores.length;
                stat.value = Math.round(average);
                
                this.saveStats();
                this.updateDisplay();
            }

            updateDisplay() {
                ['attention', 'memory', 'reaction', 'logic'].forEach(stat => {
                    const value = this.stats[stat].value;
                    document.getElementById(`${stat}-stat`).textContent = value;
                    document.getElementById(`${stat}-progress`).style.width = `${value}%`;
                });
            }
        }

        const gameProgress = new GameProgress();

        // Игра на внимательность
        let attentionGame = {
            score: 0,
            timeLeft: 30,
            interval: null,
            targetInterval: null,
            active: false
        };

        function startAttentionGame() {
            attentionGame.score = 0;
            attentionGame.timeLeft = 30;
            attentionGame.active = true;
            
            document.getElementById('attention-game').style.display = 'block';
            document.querySelector('[onclick="startAttentionGame()"]').style.display = 'none';
            
            createAttentionGrid();
            updateAttentionDisplay();
            
            attentionGame.interval = setInterval(() => {
                attentionGame.timeLeft--;
                updateAttentionDisplay();
                
                if (attentionGame.timeLeft <= 0) {
                    endAttentionGame();
                }
            }, 1000);
            
            spawnTarget();
        }

        function createAttentionGrid() {
            const grid = document.getElementById('attention-grid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'attention-cell';
                cell.onclick = () => cellClick(cell);
                grid.appendChild(cell);
            }
        }

        function spawnTarget() {
            if (!attentionGame.active) return;
            
            const cells = document.querySelectorAll('.attention-cell');
            const randomCell = cells[Math.floor(Math.random() * cells.length)];
            
            // Убираем предыдущие цели
            cells.forEach(cell => cell.classList.remove('target'));
            
            randomCell.classList.add('target');
            
            // Цель исчезает через 1.5 секунды
            setTimeout(() => {
                if (randomCell.classList.contains('target')) {
                    randomCell.classList.remove('target');
                    spawnTarget();
                }
            }, 1500);
        }

        function cellClick(cell) {
            if (!attentionGame.active) return;
            
            if (cell.classList.contains('target')) {
                attentionGame.score++;
                cell.classList.remove('target');
                updateAttentionDisplay();
                spawnTarget();
            }
        }

        function updateAttentionDisplay() {
            document.getElementById('attention-timer').textContent = attentionGame.timeLeft;
            document.getElementById('attention-score').textContent = `Очки: ${attentionGame.score}`;
        }

        function endAttentionGame() {
            attentionGame.active = false;
            clearInterval(attentionGame.interval);
            
            const score = Math.min(100, Math.max(1, attentionGame.score * 3));
            gameProgress.updateStat('attention', score);
            
            alert(`Игра окончена! Ваш счет: ${attentionGame.score}\nОчки характеристики: ${score}`);
            
            document.getElementById('attention-game').style.display = 'none';
            document.querySelector('[onclick="startAttentionGame()"]').style.display = 'block';
        }

        // Игра на память
        let memoryGame = {
            sequence: [],
            playerSequence: [],
            level: 1,
            showingSequence: false,
            gameActive: false
        };

        function startMemoryGame() {
            memoryGame.sequence = [];
            memoryGame.playerSequence = [];
            memoryGame.level = 1;
            memoryGame.gameActive = true;
            
            document.getElementById('memory-game').style.display = 'block';
            document.querySelector('[onclick="startMemoryGame()"]').style.display = 'none';
            
            createMemoryGrid();
            nextMemoryLevel();
        }

        function createMemoryGrid() {
            const grid = document.getElementById('memory-grid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 16; i++) {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.textContent = i + 1;
                card.onclick = () => memoryCardClick(i);
                grid.appendChild(card);
            }
        }

        function nextMemoryLevel() {
            // Добавляем новый элемент в последовательность
            memoryGame.sequence.push(Math.floor(Math.random() * 16));
            memoryGame.playerSequence = [];
            
            updateMemoryDisplay();
            showMemorySequence();
        }

        function showMemorySequence() {
            memoryGame.showingSequence = true;
            document.getElementById('memory-status').textContent = 'Смотрите и запоминайте!';
            
            let index = 0;
            const interval = setInterval(() => {
                if (index < memoryGame.sequence.length) {
                    highlightMemoryCard(memoryGame.sequence[index]);
                    index++;
                } else {
                    clearInterval(interval);
                    memoryGame.showingSequence = false;
                    document.getElementById('memory-status').textContent = 'Повторите последовательность!';
                }
            }, 800);
        }

        function highlightMemoryCard(index) {
            const cards = document.querySelectorAll('.memory-card');
            const card = cards[index];
            
            card.classList.add('flipped');
            setTimeout(() => {
                card.classList.remove('flipped');
            }, 400);
        }

        function memoryCardClick(index) {
            if (memoryGame.showingSequence || !memoryGame.gameActive) return;
            
            memoryGame.playerSequence.push(index);
            
            // Проверяем правильность
            const currentIndex = memoryGame.playerSequence.length - 1;
            
            if (memoryGame.playerSequence[currentIndex] !== memoryGame.sequence[currentIndex]) {
                // Ошибка
                endMemoryGame();
                return;
            }
            
            // Если последовательность завершена
            if (memoryGame.playerSequence.length === memoryGame.sequence.length) {
                memoryGame.level++;
                
                if (memoryGame.level > 5) {
                    // Игра завершена успешно
                    endMemoryGame();
                } else {
                    setTimeout(() => {
                        nextMemoryLevel();
                    }, 1000);
                }
            }
        }

        function updateMemoryDisplay() {
            document.getElementById('memory-score').textContent = `Уровень: ${memoryGame.level}`;
        }

        function endMemoryGame() {
            memoryGame.gameActive = false;
            
            const score = Math.min(100, Math.max(1, memoryGame.level * 20));
            gameProgress.updateStat('memory', score);
            
            alert(`Игра окончена! Достигнут уровень: ${memoryGame.level}\nОчки характеристики: ${score}`);
            
            document.getElementById('memory-game').style.display = 'none';
            document.querySelector('[onclick="startMemoryGame()"]').style.display = 'block';
        }

        // Игра на реакцию
        let reactionGame = {
            attempt: 1,
            maxAttempts: 5,
            startTime: 0,
            times: [],
            waiting: false
        };

        function startReactionGame() {
            reactionGame.attempt = 1;
            reactionGame.times = [];
            reactionGame.waiting = false;
            
            document.getElementById('reaction-game').style.display = 'block';
            document.querySelector('[onclick="startReactionGame()"]').style.display = 'none';
            
            nextReactionRound();
        }

        function nextReactionRound() {
            if (reactionGame.attempt > reactionGame.maxAttempts) {
                endReactionGame();
                return;
            }
            
            updateReactionDisplay();
            
            document.getElementById('reaction-button').style.display = 'none';
            document.getElementById('reaction-status').textContent = 'Приготовьтесь...';
            
            // Случайная задержка от 1 до 5 секунд
            const delay = Math.random() * 4000 + 1000;
            
            setTimeout(() => {
                if (reactionGame.attempt <= reactionGame.maxAttempts) {
                    document.getElementById('reaction-status').textContent = 'КЛИКНИТЕ СЕЙЧАС!';
                    document.getElementById('reaction-button').style.display = 'block';
                    reactionGame.startTime = Date.now();
                    reactionGame.waiting = true;
                }
            }, delay);
        }

        function reactionClick() {
            if (!reactionGame.waiting) return;
            
            const reactionTime = Date.now() - reactionGame.startTime;
            reactionGame.times.push(reactionTime);
            reactionGame.waiting = false;
            
            document.getElementById('reaction-status').textContent = `Время реакции: ${reactionTime}мс`;
            document.getElementById('reaction-button').style.display = 'none';
            
            reactionGame.attempt++;
            
            setTimeout(() => {
                nextReactionRound();
            }, 1500);
        }

        function updateReactionDisplay() {
            document.getElementById('reaction-score').textContent = `Попытка: ${reactionGame.attempt}/${reactionGame.maxAttempts}`;
        }

        function endReactionGame() {
            const averageTime = reactionGame.times.reduce((a, b) => a + b, 0) / reactionGame.times.length;
            
            // Преобразуем время в очки (чем меньше время, тем больше очков)
            const score = Math.min(100, Math.max(1, Math.round(1000 / averageTime * 100)));
            
            gameProgress.updateStat('reaction', score);
            
            alert(`Игра окончена! Среднее время реакции: ${Math.round(averageTime)}мс\nОчки характеристики: ${score}`);
            
            document.getElementById('reaction-game').style.display = 'none';
            document.querySelector('[onclick="startReactionGame()"]').style.display = 'block';
        }

        // Игра на логику
        let logicGame = {
            task: 1,
            maxTasks: 5,
            currentSequence: [],
            correctAnswer: 0,
            correctAnswers: 0
        };

        function startLogicGame() {
            logicGame.task = 1;
            logicGame.correctAnswers = 0;
            
            document.getElementById('logic-game').style.display = 'block';
            document.querySelector('[onclick="startLogicGame()"]').style.display = 'none';
            
            nextLogicTask();
        }

        function nextLogicTask() {
            if (logicGame.task > logicGame.maxTasks) {
                endLogicGame();
                return;
            